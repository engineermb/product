<!DOCTYPE html>
<html>
<head>
	<title>My chat</title>
	<meta charset="utf-8" />
  	<!-- <script src="xmlhttprequest.js"></script> -->
	
	<style>
	#box{
		width: 512px;
		border:1px solid #ff4545;
		padding: 5px;
		background: #ff4545;
	}
	#table{
		margin: auto;
		overflow-y: scroll;
		overflow-x: hidden;
		background: #fff;
		width: 500px;
		height: 400px;
		border:1px solid #ff4545;
		padding: 5px;
	}
	#main{
		margin-top: 5px;
	}
	p:nth-child(odd){
		background: #DCDCDC;
		margin: 0;
	}
	p{
		margin-top: 0px;
		margin-bottom: 0px;
	}

	</style>	
	
	<script type="text/javascript">
	function getXmlHttpRequest(){
	if(window.XMLHttpRequest){
		try{
			return new XMLHttpRequest();
		}catch(e){}
	}else if(window.ActiveXObject){
		try{
			return new ActiveXObject("Msxml2.XMLHTTP");
		}catch(e){}
		try{
			return new ActiveXObject("Microsoft.XMLHTTP");
		}catch(e){}
	}
	return null;
}
		function getMsg(){
		//alert("erdfv");
			var msg = document.getElementById("text");
			goMsg(msg.value);
			document.getElementById("text").value = "";
			document.getElementById("table").scrollTop = document.getElementById("table").scrollHeight;
			//alert(document.getElementById("table").scrollHeight);
			
		}
		
		function goMsg(data){
			var request = getXmlHttpRequest();
			request.open("GET", "chatengine.php?msg="+data, false);
			request.send(null);
			var result = document.getElementById("table");
			result.innerHTML = request.responseText;
						
			
			

			
		}
		
	
		
	</script>

</head>
<body>
	<h1>My chat</h1>
	<div id="box">
		<div id="table">
		</div>
		<div id="main">
			<form action="#" onsubmit="return false">
			<textarea id="text" rows="2" cols="48" name="text"></textarea>
			<button onclick="getMsg()">Отправить</button>
	</form>
		</div>
	</div>

	<div id="divResult">&nbsp;</div>
</body>
</html>